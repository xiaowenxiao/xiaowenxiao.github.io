<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head>
  <link href="https://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="generator" content="Hugo 0.79.0" />

  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>Win10&amp;Ubuntu子系统 &middot; x&#39;Blog</title>
  <meta name="description" content="" />

  
  <link type="text/css" rel="stylesheet" href="https://xiaowenxiao.github.io/css/print.css" media="print">
  <link type="text/css" rel="stylesheet" href="https://xiaowenxiao.github.io/css/poole.css">
  <link type="text/css" rel="stylesheet" href="https://xiaowenxiao.github.io/css/syntax.css">
  <link type="text/css" rel="stylesheet" href="https://xiaowenxiao.github.io/css/hyde.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Abril+Fatface|PT+Sans:400,400i,700">


  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/apple-touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="/favicon.png">

  
  
</head>

  <body class=" ">
  <aside class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <a href="https://xiaowenxiao.github.io/"><h1>x&#39;Blog</h1></a>
      <p class="lead">
       笔记 
      </p>
    </div>

    <nav>
      <ul class="sidebar-nav">
        <li><a href="https://xiaowenxiao.github.io/">Home</a> </li>
        <li><a href="/welcome/"> About </a></li>
      </ul>
    </nav>

    <p>&copy; 2020. All rights reserved. </p>
  </div>
</aside>

    <main class="content container">
    <div class="post">
  <h1>Win10&amp;Ubuntu子系统</h1>
  <time datetime=2020-12-11T18:20:02&#43;0800 class="post-date">Fri, Dec 11, 2020</time>
  <div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e">#=============================================================================</span>
<span style="color:#75715e"># 系统版本</span>

<span style="color:#75715e"># Windows：</span>
<span style="color:#75715e"># OS 名称:          Microsoft Windows 10 专业版</span>
<span style="color:#75715e"># OS 版本:          10.0.18363 暂缺 Build 18363</span>
<span style="color:#75715e"># OS 制造商:        Microsoft Corporation</span>
<span style="color:#75715e"># OS 配置:          独立工作站</span>
<span style="color:#75715e"># OS 构建类型:      Multiprocessor Free</span>

<span style="color:#75715e"># Linux：</span>
<span style="color:#75715e"># NAME=&#34;Ubuntu&#34;</span>
<span style="color:#75715e"># VERSION=&#34;20.04.1 LTS (Focal Fossa)&#34;</span>
<span style="color:#75715e">#=============================================================================</span>

<span style="color:#75715e"># 安装ssh(当前用户下，这里当前用户为x)</span>
sudo apt-get remove openssh-server
sudo apt-get install openssh-server
cd /home/x/.ssh
vi /etc/ssh/sshd_config
PermitRootLogin yes
PasswordAuthentication yes 

<span style="color:#75715e"># 授权普通用户使用sudo不用输入密码</span>
vim /etc/sudoers
x   	 ALL<span style="color:#f92672">=(</span>ALL:ALL<span style="color:#f92672">)</span> NOPASSWD:ALL
<span style="color:#75715e">#%sudo   ALL=(ALL:ALL) NOPASSWD:ALL</span>

<span style="color:#75715e"># 配置windows开机启动子系统ssh</span>
<span style="color:#75715e"># cmd=&gt;shell:startup</span>
<span style="color:#75715e"># 在开机启动目录下新建wls_sshd.vbs脚本并添加下面内容</span>

set ws<span style="color:#f92672">=</span>WScript.CreateObject<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;WScript.Shell&#34;</span><span style="color:#f92672">)</span>
ws.Run <span style="color:#e6db74">&#34;ubuntu.exe run sudo service ssh start&#34;</span>,0

<span style="color:#75715e"># 更换清华源</span>
vi /etc/apt/sources.list 
deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic main restricted universe multiverse
deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-updates main restricted universe multiverse
deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-backports main restricted universe multiverse
deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-security main restricted universe multiverse
apt update

<span style="color:#75715e"># 安装docker</span>
docker官方文档：https://docs.docker.com/engine/install/ubuntu/

<span style="color:#75715e"># windows10子系统有其特殊性，ubuntu作为docker客户端，windows上安装的docker for desktop作为服务端</span>
sudo apt-get install docker-ce-cli<span style="color:#f92672">=</span>&lt;VERSION_STRING&gt; containerd.io

<span style="color:#75715e"># 报错：&#34;gpg: can&#39;t connect to the agent: IPC connect call failed&#34;</span>
<span style="color:#75715e"># 解决：</span>
sudo apt remove gpg
sudo apt install gnupg1

<span style="color:#75715e"># 需要安装docker for windows，用来作为Docker的守护进程，作为Docker的服务端，ubuntu下作为客户端去访问这个守护进程</span>
<span style="color:#75715e"># 参考：https://blog.csdn.net/lupengfei1009/article/details/94637398</span>
<span style="color:#75715e"># 安装docker for windows报错：Cannot enable Hyper-V service</span>
<span style="color:#75715e"># 解决：</span>

bcdedit /set hypervisorlaunchtype Auto
<span style="color:#75715e"># 配置及刷新环境变量</span>

echo <span style="color:#e6db74">&#34;export DOCKER_HOST=&#39;tcp://0.0.0.0:2375&#39;&#34;</span> &gt;&gt; ~/.bashrc
source ~/.bashrc

<span style="color:#75715e"># vim配置</span>
vim /etc/vim/vimrc
set nocompatible 
set autoindent
set cindent
set nu
set ai! 
set tabstop<span style="color:#f92672">=</span><span style="color:#ae81ff">4</span> 
set shiftwidth<span style="color:#f92672">=</span><span style="color:#ae81ff">4</span>   
set smartindent

<span style="color:#75715e"># syntax on       支持语法高亮</span>
<span style="color:#75715e"># set nu          显示行号</span>
<span style="color:#75715e"># set nonu      不显示行号</span>
<span style="color:#75715e"># set ai          设置自动缩进</span>
<span style="color:#75715e"># set shiftwidth=4   设置自动缩进 4 个空格, 当然要设自动缩进先.</span>
<span style="color:#75715e"># set sts=4          即设置 softtabstop 为 4\. 输入 tab 后就跳了 4 格.</span>
<span style="color:#75715e"># set tabstop=4      实际的 tab 即为 4 个空格, 而不是缺省的 8 个.</span>
<span style="color:#75715e"># set expandtab      在输入 tab 后, vim 用恰当的空格来填充这个 tab.</span>
<span style="color:#75715e"># set hls 打开搜索高亮</span>
<span style="color:#75715e"># set nohls 取消搜索高亮 </span>
<span style="color:#75715e"># set list 显示特殊字符</span>
<span style="color:#75715e"># set nolist </span>
</code></pre></div>
</div>


    </main>

    
      
    
  </body>
</html>
